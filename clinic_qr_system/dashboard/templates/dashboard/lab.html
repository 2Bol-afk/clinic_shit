{% extends 'base.html' %}
{% block content %}
<h4>Laboratory Dashboard</h4>
<div class="row g-3">
  <div class="col-md-6">
    <h6>Pending Lab Requests from Doctors</h6>
    <ul class="list-group">
      {% for v in pending %}
        <li class="list-group-item">
          <a href="/patients/{{ v.patient.id }}/">{{ v.patient.full_name }}</a>
          <div class="small text-muted">Requested tests: {{ v.lab_tests|default:'-' }}</div>
          <div class="small">Dr Notes: {{ v.prescription_notes|default:'-' }}</div>
          <div class="small">At: {{ v.timestamp|date:'Y-m-d H:i' }}</div>
        </li>
      {% empty %}
        <li class="list-group-item">No pending requests.</li>
      {% endfor %}
    </ul>
  </div>
  <div class="col-md-6">
    <h6>Recently Completed Labs</h6>
    <ul class="list-group">
      {% for v in completed %}
        <li class="list-group-item">
          <a href="/patients/{{ v.patient.id }}/">{{ v.patient.full_name }}</a>
          <div class="small">Tests: {{ v.lab_tests|default:'-' }}</div>
          <div class="small">At: {{ v.timestamp|date:'Y-m-d H:i' }}</div>
        </li>
      {% empty %}
        <li class="list-group-item">No completed labs yet.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
